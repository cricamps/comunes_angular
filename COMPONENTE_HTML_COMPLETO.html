<app-navbar></app-navbar>

<div class="container mt-4">
  <div class="row mb-4">
    <div class="col-12">
      <h1 class="fw-bold mb-2">
        <i class="bi bi-database"></i> Informaci칩n Financiera
      </h1>
      <p class="text-muted">Demostraci칩n de las 3 formas de consumir datos en Angular</p>
    </div>
  </div>

  <!-- FORMA 1: JSON LOCAL -->
  <div class="card mb-4 border-primary">
    <div class="card-header bg-primary text-white">
      <h4 class="mb-0">
        <i class="bi bi-file-earmark-code"></i> FORMA 1: JSON Local
      </h4>
      <small>Ubicaci칩n: public/data/casas.json</small>
    </div>
    <div class="card-body">
      <div *ngIf="!errorLocal" class="row">
        <div class="col-md-6">
          <h5>游늵 Datos Cargados:</h5>
          <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between">
              <span><strong>Total de Casas:</strong></span>
              <span class="badge bg-primary rounded-pill">{{ totalCasas }}</span>
            </li>
            <li class="list-group-item">
              <strong>Fuente:</strong> Archivo JSON local en el proyecto
            </li>
            <li class="list-group-item">
              <strong>M칠todo:</strong> HttpClient.get()
            </li>
          </ul>
        </div>
        <div class="col-md-6">
          <div class="alert alert-success">
            <i class="bi bi-check-circle"></i> <strong>Estado:</strong> Funcionando correctamente
          </div>
          <p><strong>Caracter칤sticas:</strong></p>
          <ul>
            <li>No requiere internet</li>
            <li>Datos controlados por el desarrollador</li>
            <li>Ideal para datos est치ticos</li>
          </ul>
        </div>
      </div>

      <div *ngIf="errorLocal" class="alert alert-danger">
        <i class="bi bi-exclamation-triangle"></i> {{ errorLocal }}
      </div>
    </div>
  </div>

  <!-- FORMA 2: JSON EXTERNO (GitHub Pages) -->
  <div class="card mb-4 border-warning">
    <div class="card-header bg-warning">
      <h4 class="mb-0">
        <i class="bi bi-github"></i> FORMA 2: JSON Externo (GitHub Pages)
      </h4>
      <small>URL: https://TU-USUARIO.github.io/api-gastos-comunes/tasas-interes.json</small>
    </div>
    <div class="card-body">
      <div *ngIf="!errorTasas && tasasInteres.length > 0" class="row">
        <div class="col-md-6">
          <h5>游눯 Tasas de Inter칠s:</h5>
          <ul class="list-group">
            <li class="list-group-item" *ngFor="let tasa of tasasInteres.slice(0, 3)">
              <strong>{{ tasa.entidad }}</strong> - {{ tasa.tipoCredito }}
              <br>
              <span class="text-primary">Tasa: {{ tasa.tasaAnual }}% anual</span>
            </li>
          </ul>
        </div>
        <div class="col-md-6">
          <div class="alert alert-success">
            <i class="bi bi-check-circle"></i> <strong>Estado:</strong> Conectado
          </div>
          <div *ngIf="tasaMasBaja" class="alert alert-info">
            <strong>Mejor Tasa:</strong> {{ tasaMasBaja.entidad }}
            <br>
            <span class="fs-4">{{ tasaMasBaja.tasaAnual }}%</span>
          </div>
          <p><strong>Caracter칤sticas:</strong></p>
          <ul>
            <li>Datos alojados en GitHub Pages</li>
            <li>Consumo v칤a URL p칰blica</li>
            <li>Ideal para datos compartidos</li>
          </ul>
        </div>
      </div>

      <div *ngIf="errorTasas" class="alert alert-warning">
        <i class="bi bi-exclamation-triangle"></i> {{ errorTasas }}
        <hr>
        <p class="mb-0">
          <strong>Para activar esta funci칩n:</strong>
          <ol>
            <li>Sigue las instrucciones en <code>GITHUB_PAGES_INSTRUCCIONES.md</code></li>
            <li>Actualiza la URL en <code>tasas-interes.service.ts</code></li>
          </ol>
        </p>
      </div>
    </div>
  </div>

  <!-- FORMA 3: API REAL EXTERNA -->
  <div class="card mb-4 border-success">
    <div class="card-header bg-success text-white">
      <h4 class="mb-0">
        <i class="bi bi-cloud"></i> FORMA 3: API Real Externa
      </h4>
      <small>API: https://api.exchangerate-api.com/v4/latest/USD</small>
    </div>
    <div class="card-body">
      <div *ngIf="!errorTipoCambio && dolarHoy > 0" class="row">
        <div class="col-md-6">
          <h5>游눳 Tipo de Cambio Actual:</h5>
          <div class="card bg-light">
            <div class="card-body text-center">
              <h3>1 USD = <span class="text-success">{{ dolarHoy | number:'1.2-2' }}</span> CLP</h3>
              <p class="text-muted">D칩lar Estadounidense a Peso Chileno</p>
            </div>
          </div>
          <div class="card bg-light mt-3">
            <div class="card-body text-center">
              <h3>1 EUR = <span class="text-primary">{{ euroHoy | number:'1.2-2' }}</span> CLP</h3>
              <p class="text-muted">Euro a Peso Chileno</p>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="alert alert-success">
            <i class="bi bi-check-circle"></i> <strong>Estado:</strong> Conectado en tiempo real
          </div>
          <ul class="list-group">
            <li class="list-group-item">
              <strong>Fecha:</strong> {{ fechaActualizacion }}
            </li>
            <li class="list-group-item">
              <strong>Fuente:</strong> API p칰blica gratuita
            </li>
            <li class="list-group-item">
              <strong>Actualizaci칩n:</strong> Tiempo real
            </li>
          </ul>
          <p class="mt-3"><strong>Caracter칤sticas:</strong></p>
          <ul>
            <li>Datos actualizados constantemente</li>
            <li>No requiere autenticaci칩n</li>
            <li>Ideal para datos din치micos</li>
          </ul>
        </div>
      </div>

      <div *ngIf="errorTipoCambio" class="alert alert-danger">
        <i class="bi bi-exclamation-triangle"></i> {{ errorTipoCambio }}
        <p class="mb-0 mt-2">Verifica tu conexi칩n a internet.</p>
      </div>
    </div>
  </div>

  <!-- RESUMEN -->
  <div class="card border-info">
    <div class="card-header bg-info text-white">
      <h4 class="mb-0">
        <i class="bi bi-info-circle"></i> Resumen de las 3 Formas
      </h4>
    </div>
    <div class="card-body">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Forma</th>
            <th>Fuente</th>
            <th>Internet</th>
            <th>Actualizaci칩n</th>
            <th>Uso Ideal</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>1. JSON Local</strong></td>
            <td>public/data/</td>
            <td><span class="badge bg-success">No requiere</span></td>
            <td>Manual</td>
            <td>Datos est치ticos del proyecto</td>
          </tr>
          <tr>
            <td><strong>2. JSON Externo</strong></td>
            <td>GitHub Pages</td>
            <td><span class="badge bg-warning">Requiere</span></td>
            <td>Cuando se actualiza el repo</td>
            <td>Datos compartidos entre proyectos</td>
          </tr>
          <tr>
            <td><strong>3. API Real</strong></td>
            <td>API p칰blica</td>
            <td><span class="badge bg-warning">Requiere</span></td>
            <td>Tiempo real</td>
            <td>Datos din치micos y actualizados</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
